!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.movable=e()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}function e(t,e,n){t.style[e]="number"==typeof n?n+"px":n}function n(t,e){if(!t)throw new Error(e)}var o=function(){return null};function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;e.forEach(function(e){return t.addEventListener(e,n)})}var r=["touchstart","touchmove","touchend","touchcancel"];function a(t){if(-1===r.indexOf(t.type))return{clientX:t.clientX,clientY:t.clientY};var e=t.targetTouches[0]||t.touches[0];return{clientX:e.clientX,clientY:e.clientY}}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var s=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}()&&{passive:!0,capture:!1};return function(){function o(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.onMouseDown=function(t){var e=i.$container.getBoundingClientRect(),n=e.top,o=e.left,r=e.width,u=e.height,s=a(t),c=s.clientX,l=s.clientY;i.state.top=n,i.state.left=o,i.state.width=r,i.state.height=u,i.state.maxLeft=window.innerWidth-r,i.state.maxTop=window.innerHeight-u,i.state.currentX=c,i.state.currentY=l,i.state.movable=!0},this.onMouseUp=function(){i.state.movable&&(i.state.movable=!1)},this.onMouseMove=function(t){if(!i.state.movable)return!1;var n=a(t),o=n.clientX,r=n.clientY,u=o-i.state.currentX,s=r-i.state.currentY,c=i.state.left+u,l=i.state.top+s;i.state.boundable&&(c<0?c=0:c>i.state.maxLeft&&(c=i.state.maxLeft),l<0?l=0:l>i.state.maxTop&&(l=i.state.maxTop)),e(i.$container,"top",l),e(i.$container,"left",c)};var u=r.handler,s=void 0===u?".handler":u,c=r.container,l=void 0===c?".container":c,f=r.boundable,h=void 0!==f&&f;this.$handler=t(s),this.$container=t(l)||this.$handler,n(this.$handler,s+" element should be mounted first."),n(this.$container,l+" element should be mounted first."),this.state={boundable:h,movable:!1,currentX:0,currentY:0,top:0,left:0,maxLeft:0,maxTop:0},this.on()}return u(o,[{key:"styledMembers",value:function(){e(this.$container,"position","absolute"),e(this.$handler,"cursor","move")}},{key:"on",value:function(){this.styledMembers(),i(this.$handler,["mousedown","touchstart"],this.onMouseDown,s),i(document,["mouseup","touchend","touchcancel"],this.onMouseUp,s),i(document,["mousemove","touchmove"],this.onMouseMove,s)}}]),o}()});
