!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.movable=t()}(this,function(){"use strict";function e(e){return"string"==typeof e?document.querySelector(e):e}function t(e,t,n){var o="number"==typeof n?n+"px":n;if(e.style[t]===o)return!1;e.style[t]=o}function n(e,t){if(!e)throw new Error(t)}var o=function(){return null};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,i=arguments[3];t.forEach(function(t){return e.addEventListener(t,n,i)})}var r=["touchstart","touchmove","touchend","touchcancel"];function a(e){if(-1===r.indexOf(e.type))return{clientX:e.clientX,clientY:e.clientY};var t=e.targetTouches[0]||e.touches[0];return{clientX:t.clientX,clientY:t.clientY}}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var s=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}()&&{passive:!0,capture:!1},c=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),l.call(this);var i=t.handler,r=void 0===i?".handler":i,a=t.container,u=void 0===a?".container":a,s=t.boundable,c=void 0!==s&&s,d=t.fixed,h=void 0!==d&&d;this.$handler=e(r),this.$container=e(u)||this.$handler,n(this.$handler,r+" element should be mounted first."),n(this.$container,u+" element should be mounted first.");var f=this.$container.getBoundingClientRect(),v=f.x,m=f.y,b=f.width,p=f.height;this.state={fixed:h,boundable:c,movable:!1,originX:v,originY:m,width:b,height:p,innerWidth:window.innerWidth,innerHeight:window.innerHeight,currentX:0,currentY:0,deltaX:0,deltaY:0,mouseDeltaX:0,mouseDeltaY:0},this.on()}return u(o,[{key:"styledMembers",value:function(){t(this.$handler,"cursor","move")}},{key:"on",value:function(){this.styledMembers(),i(this.$handler,["mousedown","touchstart"],this.onMouseDown,s),i(document,["mouseup","touchend","touchcancel"],this.onMouseUp,s),i(document,["mousemove","touchmove"],this.onMouseMove,s)}}]),o}();c.version="0.0.9";var l=function(){var e=this;this.onMouseDown=function(t){var n=a(t),o=n.clientX,i=n.clientY;e.state.currentX=o,e.state.currentY=i,e.state.movable=!0},this.onMouseUp=function(){e.state.movable&&(e.state.movable=!1,e.state.deltaX+=e.state.mouseDeltaX,e.state.deltaY+=e.state.mouseDeltaY)},this.onMouseMove=function(n){if(!e.state.movable)return!1;var o=a(n),i=o.clientX,r=o.clientY,u=i-e.state.currentX,s=r-e.state.currentY;e.state.mouseDeltaX=u,e.state.mouseDeltaY=s;var c=e.state.deltaX+u,l=e.state.deltaY+s;if(e.state.boundable){var d=e.state,h=d.originX,f=d.originY,v=d.width,m=d.height,b=d.innerWidth,p=d.innerHeight;h+c<0?c=-h:b<h+v+c&&(c=b-(h+v)),f+l<0?l=-f:p<f+m+l&&(l=p-(f+m))}t(e.$container,"transform","translate3d("+c+"px, "+l+"px, 0px)")}};return c});
