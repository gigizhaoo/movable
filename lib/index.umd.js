!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.movable={})}(this,function(t){"use strict";function e(t){return"string"==typeof t?document.querySelector(t):t}function n(t,e,n){var o="number"==typeof n?n+"px":n;if(t.style[e]===o)return!1;t.style[e]=o}function o(t,e){if(!t)throw new Error(e)}var i=function(){return null};function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;e.forEach(function(e){return t.addEventListener(e,n)})}var a=["touchstart","touchmove","touchend","touchcancel"];function u(t){if(-1===a.indexOf(t.type))return{clientX:t.clientX,clientY:t.clientY};var e=t.targetTouches[0]||t.touches[0];return{clientX:e.clientX,clientY:e.clientY}}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var c=!!function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}()&&{passive:!0,capture:!1},l=function(){function t(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onMouseDown=function(t){var e=i.$container.getBoundingClientRect(),o=e.top,r=e.left,a=e.width,s=e.height,c=u(t),l=c.clientX,f=c.clientY;i.state.top=o,i.state.left=r,i.state.width=a,i.state.height=s,i.state.maxLeft=window.innerWidth-a,i.state.maxTop=window.innerHeight-s,i.state.currentX=l,i.state.currentY=f,i.state.movable=!0,n(i.$container,"width",a),n(i.$container,"height",s)},this.onMouseUp=function(){i.state.movable&&(i.state.movable=!1)},this.onMouseMove=function(t){if(!i.state.movable)return!1;var e=u(t),o=e.clientX,r=e.clientY,a=o-i.state.currentX,s=r-i.state.currentY,c=i.state.left+a,l=i.state.top+s;i.state.boundable&&(c<0?c=0:c>i.state.maxLeft&&(c=i.state.maxLeft),l<0?l=0:l>i.state.maxTop&&(l=i.state.maxTop)),n(i.$container,"top",l),n(i.$container,"left",c)};var a=r.handler,s=void 0===a?".handler":a,c=r.container,l=void 0===c?".container":c,f=r.boundable,h=void 0!==f&&f,d=r.fixed,v=void 0!==d&&d;this.$handler=e(s),this.$container=e(l)||this.$handler,o(this.$handler,s+" element should be mounted first."),o(this.$container,l+" element should be mounted first."),this.state={fixed:v,boundable:h,movable:!1,currentX:0,currentY:0,top:0,left:0,maxLeft:0,maxTop:0},this.on()}return s(t,[{key:"styledMembers",value:function(){n(this.$container,"position",this.state.fixed?"fixed":"absolute"),n(this.$handler,"cursor","move"),n(this.$container,"box-sizing","border-box")}},{key:"on",value:function(){this.styledMembers(),r(this.$handler,["mousedown","touchstart"],this.onMouseDown,c),r(document,["mouseup","touchend","touchcancel"],this.onMouseUp,c),r(document,["mousemove","touchmove"],this.onMouseMove,c)}}]),t}();t.Movable=l,t.default=l,Object.defineProperty(t,"__esModule",{value:!0})});
